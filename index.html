<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/style.css" />
  <title>Work Day Scheduler</title>
</head>

<body>
  <header class="p-5 mb-4 border-5 border-bottom border-dark text-center">
    <h1 class="display-3">Work Day Scheduler</h1>
    <p class="lead">A simple calendar app for scheduling your work day</p>
    <p id="date"></p>
    <p id="time"></p>
  </header>
  <div class="container-lg px-5">
    <!-- removed past/present/future from row time-block class -->
    <div id="hour-9" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">9AM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-10" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">10AM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-11" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">11AM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <!-- added time blocks for the rest of the "work day" -->
    <div id="hour-12" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">12PM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-13" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">1PM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-14" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">2PM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-15" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">3PM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-16" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">4PM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
    <div id="hour-17" class="row time-block">
      <div class="col-2 col-md-1 hour text-center py-3">5PM</div>
      <textarea class="col-8 col-md-10 userInput" rows="3"> </textarea>
      <button class="btn saveBtn col-2 col-md-1" aria-label="save">
        <i class="fas fa-save" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <!-- the source code is from the jQuery library to simplify the event handling -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.3/dayjs.min.js"></script>
  <script>
    // $(document) is a jQuery selector that selects the HTML document. It represents the entire HTML page.
    // .ready(...) is a jQuery method that attaches a function to be executed when the document is fully loaded. (w3 Schools)
    $(document).ready(function () {
        // Gets the current hour in 24-hour format using Day.js;
        var currentDate = dayjs();
        var formattedDate = currentDate.format("dddd, MMMM D, YYYY h:mm:ss A");
        console.log(formattedDate);

        function displayTimeAndDate() {
          // pulls date and time from p tags in HTML
            var dateEl = $("#date"); 
            var timeEl = $("#time"); 
            var currentDate = dayjs().format("dddd, MMMM D, YYYY");
            var currentTime = dayjs().format("h:mm:ss A");

            dateEl.text(currentDate);
            timeEl.text(currentTime);
        }
        // displays the live time and date at 1000 milliseconds (1 second)
        setInterval(displayTimeAndDate, 1000);
    });

    function updateClasses() {
        // Calculates the current hour using Day.js 
        var currentHour = dayjs().hour();

        // Loops through time blocks and apply classes based on the current hour
        // .each is for the collection of time blocks
        $(".time-block").each(function () {
          // the time block will change attributes (removing/adding classes)
            var timeBlockId = $(this).attr("id");
            // parseInt function changes the string into a number
            //split method that splits the string at the dash ("-") This will show an array of substrings like ["hour", "9"]
            var timeBlockHour = parseInt(timeBlockId.split("-")[1]);
            // if the time block is from the previous hour
            if (timeBlockHour < currentHour) {
              //"this" represent the .each function
              // removes classes from the current element - removes "present" and "future" classes from the time block and adds it to the past
                $(this).removeClass("present future").addClass("past");
                // if the time block is within the current hour
            } else if (timeBlockHour === currentHour) {
              // removes "past" and "future" classes from the time block and adds it to the present
                $(this).removeClass("past future").addClass("present");
            } else {
              // if the time block is an hour yet to come
              // removes "past" and "present" classes from the time block and adds it to the future
                $(this).removeClass("past present").addClass("future");
            }
        });
    }

    // Calls the function on page load
    updateClasses();

    // Calls the function at every minute
    setInterval(updateClasses, 60000); // 60000 milliseconds = 1 minute
</script>
  <script integrity="sha256-iu/zLUB+QgISXBLCW/mcDi/rnf4m4uEDO0wauy76x7U=" crossorigin="anonymous">
  </script>
  <script src="./assets/script.js"></script>
</body>
</html>